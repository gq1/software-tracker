primary:
  persistence:
    storageClass: "cinder"
  service:
    type: NodePort
    nodePort: 30098

auth:
  username: "tol2"
  password: "tol2"

initdbScripts:
  extra_users.sql: |
    CREATE USER IF NOT EXISTS "toladmin"@"%" IDENTIFIED BY "tol";
    GRANT ALL PRIVILEGES ON *.* TO "toladmin"@"%";
    CREATE USER IF NOT EXISTS "tol"@"%";
    GRANT EXECUTE, LOCK TABLES, SELECT, SHOW VIEW ON *.* TO "tol"@"%";
    GRANT PROCESS, SHOW DATABASES ON *.* TO "tol"@"%";
    CREATE DATABASE IF NOT EXISTS software_tracker;
    USE software_tracker;
    CREATE TABLE IF NOT EXISTS `logging_event` (
    `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
    `uuid` char(36) NOT NULL DEFAULT '',
    `user` varchar(16) NOT NULL DEFAULT '',
    `timestamp` datetime NOT NULL,
    `image` varchar(255) NOT NULL DEFAULT '',
    `executable` varchar(255) DEFAULT NULL,
    `path` varchar(255) DEFAULT NULL,
    `parameters` mediumtext,
    `origin` set('api','logfile') NOT NULL DEFAULT 'api',
    PRIMARY KEY (`id`),
    UNIQUE KEY `uuid` (`uuid`),
    KEY `user` (`user`),
    KEY `image` (`image`),
    KEY `timestamp` (`timestamp`),
    KEY `user_2` (`user`,`image`,`timestamp`)
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;